


            using Microsoft.SqlServer.Management.Common;
            using Microsoft.SqlServer.Management.Smo;
            using Microsoft.Data.SqlClient;
            using Microsoft.EntityFrameworkCore;


            SqlConnectionStringBuilder sqlConn = new SqlConnectionStringBuilder();
            sqlConn.DataSource = "localhost";
            sqlConn.UserID = "test";
            sqlConn.Password = "test";
            sqlConn.InitialCatalog = "master";
            sqlConn.Encrypt = false;

            FileInfo file = new FileInfo("C:\\Users\\Role\\SQLQuery1.sql");
            string script = file.OpenText().ReadToEnd();
            SqlConnection conn = new SqlConnection(sqlConn.ConnectionString);
            Server server = new Server(new ServerConnection(conn));

            try 
            {
                server.ConnectionContext.ExecuteNonQuery(script);
               
            }
            catch (Exception ex)
            {
                Console.WriteLine("Error: " + ex.InnerException.Message);
            }

            file.OpenText().Close();
            conn.Close();
