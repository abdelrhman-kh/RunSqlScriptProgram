


            using Microsoft.SqlServer.Management.Common;
            using Microsoft.SqlServer.Management.Smo;
            using Microsoft.Data.SqlClient;
            using Microsoft.EntityFrameworkCore;


            SqlConnectionStringBuilder sqlConn = new SqlConnectionStringBuilder();
            sqlConn.DataSource = "localhost";
            sqlConn.UserID = "test";
            sqlConn.Password = "test";
            sqlConn.InitialCatalog = "master";
            sqlConn.Encrypt = false;


            FileInfo file = new FileInfo("C:\\Users\\Role\\SQLQuery1.sql");
            string script = file.OpenText().ReadToEnd();
            SqlConnection conn = new SqlConnection(sqlConn.ConnectionString);
            Server server = new Server(new ServerConnection(conn));

            try 
            {
                server.ConnectionContext.ExecuteNonQuery(script);
               
            }
            catch (Exception ex)
            {
                Console.WriteLine("Error: " + ex.InnerException.Message);
            }

            file.OpenText().Close();
            conn.Close();











            try 
            { 
                SqlConnectionStringBuilder builder = new SqlConnectionStringBuilder();

                builder.DataSource = "<your_server.database.windows.net>"; 
                builder.UserID = "<your_username>";            
                builder.Password = "<your_password>";     
                builder.InitialCatalog = "<your_database>";
         
                using (SqlConnection connection = new SqlConnection(builder.ConnectionString))
                {
                    Console.WriteLine("\nQuery data example:");
                    Console.WriteLine("=========================================\n");
                    
                    connection.Open();       

                    String sql = "SELECT name, collation_name FROM sys.databases";

                    using (SqlCommand command = new SqlCommand(sql, connection))
                    {
                        using (SqlDataReader reader = command.ExecuteReader())
                        {
                            while (reader.Read())
                            {
                                Console.WriteLine("{0} {1}", reader.GetString(0), reader.GetString(1));
                            }
                        }
                    }                    
                }
            }
            catch (SqlException e)
            {
                Console.WriteLine(e.ToString());
            }
            Console.WriteLine("\nDone. Press enter.");
            Console.ReadLine(); 







